(function(){"use strict";var t={9575:function(t,o,e){var i=e(7195),s=function(){var t=this,o=t._self._c;return o("div",{attrs:{id:"todoBody"}},[o("TodoHeader",{on:{addTodo:t.addTodo}}),o("TodoList",{attrs:{todos:t.todos}}),o("TodoFooter",{attrs:{todos:t.todos},on:{deleteDoneTodo:t.deleteDoneTodo,selectAllTodo:t.selectAllTodo}})],1)},n=[],d=e(9283),r=e.n(d),l=function(){var t=this,o=t._self._c;return o("div",{attrs:{id:"todoHeader"}},[o("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.title,expression:"title",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"請輸入你的任務名稱，按回車鍵確認"},domProps:{value:t.title},on:{keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.add.apply(null,arguments)},change:function(o){t.title=o.target.value}}})])},a=[],u=e(9523),c={name:"TodoHeader",data(){return{title:""}},methods:{add(){if(!this.title.trim())return;const t={id:(0,u.x0)(),title:this.title,isDone:!1};this.$emit("addTodo",t),this.title=""}}},h=c,f=e(1001),p=(0,f.Z)(h,l,a,!1,null,"75c8d6f8",null),v=p.exports,m=function(){var t=this,o=t._self._c;return o("ul",{directives:[{name:"show",rawName:"v-show",value:t.todos.length>0,expression:"todos.length > 0"}],attrs:{id:"todoList"}},t._l(t.todos,(function(t){return o("TodoItem",{key:t.id,attrs:{todos:t}})})),1)},T=[],b=function(){var t=this,o=t._self._c;return o("li",{attrs:{id:"todoItem"}},[o("label",[o("input",{attrs:{type:"checkbox"},domProps:{checked:t.todos.isDone},on:{change:function(o){return t.handleCheck(t.todos.id)}}}),o("span",{directives:[{name:"show",rawName:"v-show",value:!t.todos.isEdit,expression:"!todos.isEdit"}]},[t._v(t._s(t.todos.title))]),o("input",{directives:[{name:"show",rawName:"v-show",value:t.todos.isEdit,expression:"todos.isEdit"}],ref:"inputTitle",attrs:{type:"text"},domProps:{value:t.todos.title},on:{blur:function(o){return t.blurTodo(t.todos,o)}}})]),o("div",[o("button",{directives:[{name:"show",rawName:"v-show",value:!t.todos.isEdit,expression:"!todos.isEdit"}],staticClass:"hover-button edit",on:{click:function(o){return t.editTodo(t.todos)}}},[t._v("編輯")]),o("button",{staticClass:"hover-button",on:{click:function(o){return t.delTodo(t.todos.id)}}},[t._v("刪除")])])])},y=[],w={name:"TodoItem",props:["todos"],methods:{handleCheck(t){r().publish("checkTodo",t)},delTodo(t){confirm("確定刪除當前任務嗎？")&&r().publish("deleteTodo",t)},editTodo(t){t.hasOwnProperty("isEdit")?t.isEdit=!0:this.$set(t,"isEdit",!0),this.$nextTick((()=>{this.$refs.inputTitle.focus()}))},blurTodo(t,o){if(t.isEdit=!1,!o.target.value.trim())return alert("輸入不能為空");this.$bus.$emit("editTodoName",t.id,o.target.value)}}},k=w,_=(0,f.Z)(k,b,y,!1,null,"0ea0cc6f",null),g=_.exports,x={name:"TodoList",components:{TodoItem:g},props:["todos"]},A=x,E=(0,f.Z)(A,m,T,!1,null,"03121b1e",null),O=E.exports,D=function(){var t=this,o=t._self._c;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.total,expression:"total"}],attrs:{id:"todoFooter"}},[o("div",{staticClass:"total"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.isAll,expression:"isAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isAll)?t._i(t.isAll,null)>-1:t.isAll},on:{change:function(o){var e=t.isAll,i=o.target,s=!!i.checked;if(Array.isArray(e)){var n=null,d=t._i(e,n);i.checked?d<0&&(t.isAll=e.concat([n])):d>-1&&(t.isAll=e.slice(0,d).concat(e.slice(d+1)))}else t.isAll=s}}}),o("span",[t._v("已完成: "+t._s(t.doneTodo)+" / 全部: "+t._s(t.total))])]),o("button",{on:{click:t.delDoneTodo}},[t._v("清除已完成的任務")])])},N=[],$={name:"TodoFooter",props:["todos"],methods:{delDoneTodo(){confirm("確定刪除已完成的任務嗎？")&&this.$emit("deleteDoneTodo")}},computed:{total(){return this.todos.length},doneTodo(){return this.todos.reduce(((t,o)=>t+(o.isDone?1:0)),0)},isAll:{get(){return this.doneTodo===this.total&&this.total>0},set(t){this.$emit("selectAllTodo",t)}}}},P=$,C=(0,f.Z)(P,D,N,!1,null,"49471162",null),Z=C.exports,j={name:"App",components:{TodoHeader:v,TodoList:O,TodoFooter:Z},methods:{addTodo(t){this.todos.unshift(t)},checkTodo(t,o){this.todos.forEach((t=>{t.id===o&&(t.isDone=!t.isDone)}))},editTodoName(t,o){this.todos.forEach((e=>{e.id===t&&(e.title=o)}))},deleteTodo(t,o){this.todos=this.todos.filter((t=>t.id!==o))},deleteDoneTodo(){this.todos=this.todos.filter((t=>!t.isDone))},selectAllTodo(t){this.todos.forEach((o=>{o.isDone=t}))}},data(){return{todos:JSON.parse(localStorage.getItem("todos"))||[]}},watch:{todos:{handler(){localStorage.setItem("todos",JSON.stringify(this.todos))},deep:!0}},mounted(){this.pid1=r().subscribe("checkTodo",this.checkTodo),this.pid2=r().subscribe("deleteTodo",this.deleteTodo),this.$bus.$on("editTodoName",this.editTodoName)},beforeDestroy(){r().unsubscribe(this.pid1),r().unsubscribe(this.pid2),this.$bus.$off("editTodoName")}},I=j,F=(0,f.Z)(I,s,n,!1,null,null,null),H=F.exports;i.ZP.config.productionTip=!1,new i.ZP({render:t=>t(H),beforeCreate(){i.ZP.prototype.$bus=this}}).$mount("#app")}},o={};function e(i){var s=o[i];if(void 0!==s)return s.exports;var n=o[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}e.m=t,function(){var t=[];e.O=function(o,i,s,n){if(!i){var d=1/0;for(u=0;u<t.length;u++){i=t[u][0],s=t[u][1],n=t[u][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||d>=n)&&Object.keys(e.O).every((function(t){return e.O[t](i[l])}))?i.splice(l--,1):(r=!1,n<d&&(d=n));if(r){t.splice(u--,1);var a=s();void 0!==a&&(o=a)}}return o}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[i,s,n]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var i in o)e.o(o,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:o[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){e.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};e.O.j=function(o){return 0===t[o]};var o=function(o,i){var s,n,d=i[0],r=i[1],l=i[2],a=0;if(d.some((function(o){return 0!==t[o]}))){for(s in r)e.o(r,s)&&(e.m[s]=r[s]);if(l)var u=l(e)}for(o&&o(i);a<d.length;a++)n=d[a],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(u)},i=self["webpackChunktodo_list"]=self["webpackChunktodo_list"]||[];i.forEach(o.bind(null,0)),i.push=o.bind(null,i.push.bind(i))}();var i=e.O(void 0,[998],(function(){return e(9575)}));i=e.O(i)})();
//# sourceMappingURL=app.770b9454.js.map